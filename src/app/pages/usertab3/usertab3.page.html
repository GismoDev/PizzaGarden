<ion-header>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button (click)="signOut(id)">
        <ion-icon name="caret-down-outline" color="dark"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="ion-text-left" color="pizza">ออเดอร์</ion-title>
  </ion-toolbar>
  <ion-segment (ionChange)="segmentChanged(day)" [(ngModel)]="day" color="pizza">
    <ion-segment-button value="1" layout="icon-start" color="pizza">
      <ion-label color="pizza">ออเดอร์</ion-label>
      <ion-icon name="receipt-outline" color="pizza"></ion-icon>
    </ion-segment-button>
    <ion-segment-button value="3" layout="icon-start" color="pizza">
      <ion-label color="pizza">รายการ</ion-label>
      <ion-icon name="reader-outline" color="pizza"></ion-icon>
    </ion-segment-button>
    <ion-segment-button value="2" layout="icon-start" color="pizza">
      <ion-label color="pizza">ย้ายโต๊ะ</ion-label>
      <ion-icon name="swap-horizontal-outline" color="pizza"></ion-icon>
    </ion-segment-button>
  </ion-segment>
</ion-header>

<ion-content>

  <div *ngIf="day != '1' && day != '2' && day != '3'">
    <ion-item color="pizza">
      <ion-grid align-items-center>
        <ion-row class="header-row">
            <ion-col  size="2"><ion-label color="light">#</ion-label></ion-col>
            <ion-col  align="center" size="2" class="ion-hide-sm-down"><ion-label color="light">หมายเลขโต๊ะ</ion-label></ion-col>
            <ion-col  align="center" size="4" class="ion-hide-sm-down"><ion-label color="light">วัน/เวลา</ion-label></ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content pullingIcon="pizza"></ion-refresher-content>
    </ion-refresher>
  
    <ion-item *ngFor="let p of vieworder | slice:startIndex:endIndex; let i= index">
      <ion-grid align-items-center>
        <ion-row>
  
            <ion-col size="2">{{p.orderID}}</ion-col>
            <ion-col align="center" size="2">{{p.tableNumber}}</ion-col>
            <ion-col align="center" size="4" class="ion-hide-sm-down">{{p.created_at}}</ion-col>
     
  
            <ion-col size="4">
              <ion-button expand="block" shape="round" fill="outline" class="showODT-button-color" (click)='showOrderDetail(p.orderID,p.tableID)'>รายละเอียด</ion-button>
              <!-- <ion-button expand="block" shape="round" fill="outline" class="pay-button-color" *ngIf="p.orderStatus == 'X'" (click)='selectpromo(p.orderID)'>ชำระเงิน</ion-button> -->
            </ion-col>
  
            <ion-col size="4">
              <!-- <ion-label *ngIf="p.orderStatus == 'Y'" align="center" class="showODT-button-color">กำลังทำ</ion-label> -->
              <!-- <ion-label *ngIf="p.orderStatus == 'X'" align="center" color="warning">ทำเสร็จแล้ว</ion-label> -->
              <ion-button expand="block" shape="round" fill="outline" class="pay-button-color" *ngIf="p.orderStatus == 'Y'" (click)='selectpromo(p.orderID)'>ชำระเงิน</ion-button>
              <ion-label *ngIf="p.orderStatus == 'N'" align="center" color="danger">ชำระเงินแล้ว</ion-label>
            </ion-col>
  
        </ion-row>
        
      </ion-grid>
    </ion-item>

  </div>

  <div *ngIf="day == '1'">

    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content pullingIcon="pizza"></ion-refresher-content>
    </ion-refresher>

    <ion-item color="pizza">
      <ion-grid align-items-center>
        <ion-row class="header-row">
            <ion-col  size="2"><ion-label color="light">#</ion-label></ion-col>
            <ion-col  align="center" size="2" class="ion-hide-sm-down"><ion-label color="light">หมายเลขโต๊ะ</ion-label></ion-col>
            <ion-col  align="center" size="4" class="ion-hide-sm-down"><ion-label color="light">วัน/เวลา</ion-label></ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

    <ion-item *ngFor="let p of vieworder | slice:startIndex:endIndex; let i= index">
      <ion-grid align-items-center>
        <ion-row>
  
            <ion-col size="2">{{p.orderID}}</ion-col>
            <ion-col align="center" size="2">{{p.tableNumber}}</ion-col>
            <ion-col align="center" size="4" class="ion-hide-sm-down">{{p.created_at}}</ion-col>
     
  
            <ion-col size="4">
              <ion-button expand="block" shape="round" fill="outline" class="showODT-button-color" (click)='showOrderDetail(p.orderID,p.tableID)'>รายละเอียด</ion-button>
              <!-- <ion-button expand="block" shape="round" fill="outline" class="pay-button-color" *ngIf="p.orderStatus == 'X'" (click)='selectpromo(p.orderID)'>ชำระเงิน</ion-button> -->
            </ion-col>
  
            <ion-col size="4">
              <!-- <ion-label *ngIf="p.orderStatus == 'Y'" align="center" class="showODT-button-color">กำลังทำ</ion-label> -->
              <!-- <ion-label *ngIf="p.orderStatus == 'X'" align="center" color="warning">ทำเสร็จแล้ว</ion-label> -->
              <ion-button expand="block" shape="round" fill="outline" class="pay-button-color" *ngIf="p.orderStatus == 'Y'" (click)='selectpromo(p.orderID)'>ชำระเงิน</ion-button>
              <ion-label *ngIf="p.orderStatus == 'N'" align="center" color="danger">ชำระเงินแล้ว</ion-label>
            </ion-col>
  
        </ion-row>

      </ion-grid>
    </ion-item>

  </div>

  <div *ngIf="day == '2'">

    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content pullingIcon="pizza"></ion-refresher-content>
    </ion-refresher>
    
    <ion-item color="pizza">
      <ion-grid align-items-center>
        <ion-row class="header-row">
            <ion-col  align="center" size="4"><ion-label color="light">#</ion-label></ion-col>
            <ion-col  align="center" size="4"><ion-label color="light">หมายเลขโต๊ะ</ion-label></ion-col>
            <ion-col  align="center" size="4" class="ion-hide-sm-down"><ion-label color="light">วัน/เวลา</ion-label></ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

    <ion-item *ngFor="let p of viewonchangetable">
      <ion-grid align-items-center>
        <ion-row *ngIf="p.orderStatus != 'N' && p.tableID != '1'">
  
            <ion-col align="center" size="4">{{p.orderID}}</ion-col>
            <ion-col align="center" size="4">{{p.tableNumber}}</ion-col>
            <ion-col align="center" size="4" class="ion-hide-sm-down">{{p.created_at}}</ion-col>
     
  
            <ion-col>
              <ion-button expand="block" shape="round" fill="outline" class="showODT-button-color" (click)='changeTable(p.tableID)'>ย้ายโต๊ะ</ion-button>
            </ion-col>
  
            
        </ion-row>
      </ion-grid>
    </ion-item>

  </div>

  <div *ngIf="day == '3'">

    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content pullingIcon="pizza"></ion-refresher-content>
    </ion-refresher>
  
    <ion-item color="pizza">
      <ion-grid align-items-center>
        <ion-row>
          <ion-col  align="center" size="1"><ion-label color="light">#</ion-label></ion-col>
          <ion-col  align="center" size="4"><ion-label color="light">ชื่ออาหาร</ion-label></ion-col>
          <ion-col  align="center" size="2"><ion-label color="light">จำนวน</ion-label></ion-col>
          <ion-col  align="center" size="2"><ion-label color="light"></ion-label></ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

      
      <ion-item *ngFor="let p of vieworderdetail | slice:startIndex:endIndex; let i = index">
        <ion-grid align-items-center>
          <ion-row>
            <ion-col align="center" size="1">{{p.orderID}}</ion-col>
            <ion-col align="center" size="4">{{p.foodName}}</ion-col>
            <ion-col align="center" size="2">{{p.odt_amount}}</ion-col>
            <ion-col align="center" size="2">{{p.tableNumber}}</ion-col>
            <ion-col size="3">
              <ion-label *ngIf="p.odt_status == 'A'" align="center" class="showODT-button-color">กำลังทำ</ion-label>
              <ion-label *ngIf="p.odt_status == 'B'" align="center" color="warning">ทำเสร็จแล้ว</ion-label>
              <ion-label *ngIf="p.odt_status == 'C'" align="center" color="danger">ชำระเงินแล้ว</ion-label>
              <ion-label align="center">{{ p.reservTime }}</ion-label>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-item> 

  </div>
</ion-content>

<ion-footer *ngIf="day != '1' && day != '2' && day != '3'">
  <ion-item>
    <ion-grid align-items-center>
      <ion-row>

          <ion-col class="ion-hide-sm-down">
            <ion-button expand="block" shape="round" fill="outline" class="pagebutton" (click)="prevIndex()"><ion-icon name="caret-back-outline"></ion-icon></ion-button>
          </ion-col>

          <ion-col *ngFor="let i of getArrayFormnumber(vieworder.lenght); let r = index">
            <ion-button expand="block" shape="round" fill="outline"  class="pagebutton"(click)="updateIndex(r)">{{r+1}}</ion-button>
          </ion-col>

          <ion-col class="ion-hide-sm-down">
            <ion-button expand="block" shape="round" fill="outline" class="pagebutton" (click)="nextIndex()"><ion-icon name="caret-forward-outline"></ion-icon></ion-button>
          </ion-col>

      </ion-row>
    </ion-grid>
  </ion-item>
  </ion-footer>

  <ion-footer *ngIf="day == '1'">
    <ion-item>
      <ion-grid align-items-center>
        <ion-row>
  
            <ion-col class="ion-hide-sm-down">
              <ion-button expand="block" shape="round" fill="outline" class="pagebutton" (click)="prevIndex()"><ion-icon name="caret-back-outline"></ion-icon></ion-button>
            </ion-col>
  
            <ion-col *ngFor="let i of getArrayFormnumber(vieworder.lenght); let r = index">
              <ion-button expand="block" shape="round" fill="outline"  class="pagebutton"(click)="updateIndex(r)">{{r+1}}</ion-button>
            </ion-col>
  
            <ion-col class="ion-hide-sm-down">
              <ion-button expand="block" shape="round" fill="outline" class="pagebutton" (click)="nextIndex()"><ion-icon name="caret-forward-outline"></ion-icon></ion-button>
            </ion-col>
  
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-footer>

  <ion-footer *ngIf="day == '3'">
    <ion-item>
      <ion-grid align-items-center>
        <ion-row>
  
            <ion-col class="ion-hide-sm-down">
              <ion-button expand="block" shape="round" fill="outline" class="pagebutton" (click)="prevIndex()"><ion-icon name="caret-back-outline"></ion-icon></ion-button>
            </ion-col>
  
            <ion-col *ngFor="let i of getArrayFormnumber2(vieworderdetail.lenght); let r = index">
              <ion-button expand="block" shape="round" fill="outline"  class="pagebutton"(click)="updateIndex(r)">{{r+1}}</ion-button>
            </ion-col>
  
            <ion-col class="ion-hide-sm-down">
              <ion-button expand="block" shape="round" fill="outline" class="pagebutton" (click)="nextIndex()"><ion-icon name="caret-forward-outline"></ion-icon></ion-button>
            </ion-col>
  
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-footer>